<!DOCTYPE html>
<html>

    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <title>Test</title>
        <script type="text/javascript">
            
            
            
            
        </script>
        <script type="text/javascript" src="Thing.js"></script>
        <script type="text/javascript" src="http://canvg.github.io/canvg/rgbcolor.js"></script> 
        <script type="text/javascript" src="http://canvg.github.io/canvg/StackBlur.js"></script>
        <script type="text/javascript" src="http://canvg.github.io/canvg/canvg.js"></script> 
        <link rel="stylesheet" href="style.css">
    </head>
    <body onload=map()>
        <canvas id='canva' width="1960" height="941">Обновите браузер</canvas>
        <div border="1" class="pickbox">
        <input id="checkbox" onchange=ant4g(this) type="checkbox">
        <label for="checkbox">4g Антена</label>
        </div>
        
    <script>
        var canva = document.getElementById("canva"),
            ctx = canva.getContext('2d'),
            img = new Thing('house.png',0,0,1560,941),
            antena4g =  new Thing('4g.png',250,400,100,100);
            batch = new Map();
        function map(){
                    batch.set("map",img);
                    render();                
            }
        function ant4g(check){
                if (check.checked){
                        batch.set("4g",antena4g);
                        render();
                } else {
                    batch.delete("4g");
                    render();
                }
            
        }
        function render() {
            for (var key of batch.keys()){
                ctx.drawImage(batch.get(key).getPic(), batch.get(key).getX(), batch.get(key).getY(), batch.get(key).getPicWidth(), batch.get(key).getPicHeight());
            }
        }
    </script>
    </body>
</html>
